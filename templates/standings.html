{% extends 'base.html' %}

{% block title %}Standings - {{ league.name }}{% endblock %}

{% block content %}
<style>
    /* Header Area */
    .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .page-title { margin: 0; font-size: 28px; font-weight: 800; color: var(--text-primary); }
    
    /* Legend */
    .legend { display: flex; gap: 15px; font-size: 12px; font-weight: 500; color: var(--text-secondary); background: #fff; padding: 8px 15px; border-radius: 20px; border: 1px solid var(--border-color); }
    .legend-item { display: flex; align-items: center; gap: 6px; }
    .dot { width: 10px; height: 10px; border-radius: 50%; }
    
    /* Grid Layout */
    .standings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
    
    /* Conference Card */
    .conf-card { background: #fff; border-radius: 12px; border: 1px solid var(--border-color); overflow: hidden; }
    .conf-title { 
        padding: 15px 20px; font-size: 16px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
        display: flex; justify-content: space-between; align-items: center;
    }
    .conf-east { background: linear-gradient(to right, #1e3a8a, #3b82f6); color: white; }
    .conf-west { background: linear-gradient(to right, #991b1b, #ef4444); color: white; }

    /* Table Styling */
    .standings-table { width: 100%; border-collapse: collapse; font-size: 14px; }
    .standings-table th { background: #f9fafb; color: var(--text-secondary); font-size: 11px; text-transform: uppercase; padding: 12px 15px; text-align: center; border-bottom: 1px solid #eee; }
    .standings-table th:first-child { text-align: left; }
    
    .standings-table td { padding: 12px 15px; border-bottom: 1px solid #f3f4f6; text-align: center; color: var(--text-primary); }
    .standings-table td:first-child { text-align: left; font-weight: 600; display: flex; align-items: center; gap: 12px; }
    .standings-table tr:last-child td { border-bottom: none; }
    .standings-table tr:hover { background-color: #f9fafb; }

    .seed { font-size: 12px; color: #999; font-weight: 400; width: 15px; display: inline-block; }
    .team-logo { width: 28px; height: 28px; object-fit: contain; }
    
    /* Zones */
    .zone-playoff { border-left: 4px solid var(--success); }
    .zone-playin { border-left: 4px solid #f59e0b; }
    .zone-lottery { border-left: 4px solid transparent; }
    
    /* User Team */
    .user-team-row { background-color: #eff6ff !important; }
    .user-team-row td:first-child { color: var(--accent); }
</style>

<div class="page-header">
    <h1 class="page-title">League Standings</h1>
    <div class="legend">
        <div class="legend-item"><span class="dot" style="background:var(--success);"></span> Playoffs (1-6)</div>
        <div class="legend-item"><span class="dot" style="background:#f59e0b;"></span> Play-In (7-10)</div>
    </div>
</div>

<div class="standings-grid">
    
    <div class="conf-card">
        <div class="conf-title conf-east">Eastern Conference</div>
        <table class="standings-table">
            <thead>
                <tr>
                    <th>Team</th><th>W</th><th>L</th><th>PCT</th><th>GB</th><th>Odds</th>
                </tr>
            </thead>
            <tbody>
                {% for t in east %}
                <tr class="
                    {% if loop.index <= 6 %}zone-playoff{% elif loop.index <= 10 %}zone-playin{% else %}zone-lottery{% endif %}
                    {% if t.team_id == league.user_team_id %}user-team-row{% endif %}
                ">
                    <td>
                        <span class="seed">{{ loop.index }}</span>
                        <img src="{{ t.logo_url }}" class="team-logo">
                        <a href="/team/{{ t.team_id }}" style="text-decoration:none; color:inherit;">
                            {{ t.city }} {{ t.name }}
                        </a>
                    </td>
                    <td style="font-weight:700;">{{ t.wins }}</td>
                    <td>{{ t.losses }}</td>
                    <td>{{ t.pct }}</td>
                    <td style="color:#888;">{{ t.gb if t.gb > 0 else '-' }}</td>
                    <td style="color:var(--accent); font-weight:600;">{{ t.playoff_odds }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="conf-card">
        <div class="conf-title conf-west">Western Conference</div>
        <table class="standings-table">
            <thead>
                <tr>
                    <th>Team</th><th>W</th><th>L</th><th>PCT</th><th>GB</th><th>Odds</th>
                </tr>
            </thead>
            <tbody>
                {% for t in west %}
                <tr class="
                    {% if loop.index <= 6 %}zone-playoff{% elif loop.index <= 10 %}zone-playin{% else %}zone-lottery{% endif %}
                    {% if t.team_id == league.user_team_id %}user-team-row{% endif %}
                ">
                    <td>
                        <span class="seed">{{ loop.index }}</span>
                        <img src="{{ t.logo_url }}" class="team-logo">
                        <a href="/team/{{ t.team_id }}" style="text-decoration:none; color:inherit;">
                            {{ t.city }} {{ t.name }}
                        </a>
                    </td>
                    <td style="font-weight:700;">{{ t.wins }}</td>
                    <td>{{ t.losses }}</td>
                    <td>{{ t.pct }}</td>
                    <td style="color:#888;">{{ t.gb if t.gb > 0 else '-' }}</td>
                    <td style="color:var(--accent); font-weight:600;">{{ t.playoff_odds }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}